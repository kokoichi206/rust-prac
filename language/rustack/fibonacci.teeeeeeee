// アキュムレータが不要（末尾再帰）。
// 再帰関数の呼び出しがその関数の最後に行われる（つまり、その後に追加の処理がない）再帰のこと
// 末尾再帰最適化（Tail Call Optimization, TCO）
// 末尾再帰で書かれた関数は、一般的にコンパイラやインタープリタによって最適化され、ループのように実行されることが多い
/fib {
    /n exch def
    { n 1 < }
    { 0 }
    {
        { n 2 < }
        { 1 }
        {
            n 1 -
            fib
            n 2 -
            fib
            +
        }
        if
    }
    if
} def

10 fib puts
